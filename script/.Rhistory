# setting the working directories
data <- "C:/Users/Sean Hambali/Desktop/DATA/"
rout <- "C:/Users/Sean Hambali/Documents/Github/siranap_hospital_data/rdata/"
csvout <- "C:/Users/Sean Hambali/Documents/Github/siranap_hospital_data/csv/"
dtaout <- "C:/Users/Sean Hambali/Documents/Github/siranap_hospital_data/dta/"
# importing the kabupaten correspondence file
district_list <- read.table(paste0(data, "Kode KabupatenKota.csv"), sep = "\t")
names(district_list) <- c("district_code", "district_name", "province_code")
district_codes <- as.character(district_list$district_code)
# building the scraper!
# COVID Beds ----
for (i in district_codes) {
# getting the province codes
prov_code <- str_sub(i, 1,2)
district_code <- i
# specifying the base url
url <- paste0("https://yankes.kemkes.go.id/app/siranap/rumah_sakit?jenis=1&propinsi=",
prov_code,
"prop&kabkota=",
district_code)
base_html <- read_html(url)
# getting the list of hospitals in Jakarta Pusat
list_hospital_html <- html_nodes(base_html, "h5")
list_hospital <- html_text(list_hospital_html)
# getting the hospital address
address_html <- html_nodes(base_html, ".col-md-7 p")
address <- html_text(address_html)
# queue data
queue_html <- html_nodes(base_html, ".mb-0:nth-child(3)")
queue <- html_text(queue_html) %>%
gsub("\r\n", "", .) %>%
str_trim(side = c("both", "left", "right")) %>%
str_squish()
# update time
update_html <- html_nodes(base_html, ".mb-0:nth-child(4)")
update <- html_text(update_html) %>%
gsub("\r\n", "", .) %>%
gsub("(diupdate|yang lalu)", "", .) %>%
str_trim(side = c("both", "left", "right")) %>%
str_squish()
# telephone number
tlp_html <- html_nodes(base_html, ".text-right span")
tlp <- html_text(tlp_html)
tlp <- tlp[-1]
# getting the bed availability data
bed_availability_html <- html_nodes(base_html, ".mb-1+ .mb-0")
bed_availability <- html_text(bed_availability_html) %>%
gsub("\r\n", "", .) %>%
str_trim(side = c("both", "left", "right")) %>%
str_squish()
# combining into df for COVID beds
half_list <- tibble(
hospital = list_hospital,
address = address,
bed_availability = bed_availability,
queue = queue,
last_update = update,
tlp_number = tlp,
province = prov_code,
district = district_code,
scraped_at = Sys.time(),
bed_type = "COVID-19"
)
# get today's date
date <- Sys.Date() %>%
format("%m%d")
# saving the data
assign(paste0("covid_bed_data_", district_code, "_", date),
half_list)
}
# APPENDING THE COVID BEDS DATA ----
dflist <- lapply(paste0("covid_bed_data_",district_codes,"_",date), get)
base_data <- rbindlist(dflist)
saveRDS(base_data, file=paste0(rout, "covid_bed_data_all", "_", date, ".rds"))
write.csv(base_data, paste0(csvout, "covid_bed_data_all", "_", date, ".csv"))
write_dta(base_data, paste0(dtaout, "covid_bed_data_all", "_", date, ".dta"))
# Non-COVID Beds ----
for (i in district_codes) {
# getting the province codes
prov_code <- str_sub(i, 1,2)
district_code <- i
# specifying the base url
url <- paste0("https://yankes.kemkes.go.id/app/siranap/rumah_sakit?jenis=2&propinsi=",
prov_code,
"prop&kabkota=",
district_code)
base_html <- read_html(url)
# getting the list of hospitals in Jakarta Pusat
list_hospital_html <- html_nodes(base_html, "h5")
list_hospital <- html_text(list_hospital_html)
# getting the hospital address
address_html <- html_nodes(base_html, "p")
address <- html_text(address_html)
# beds
bed_html <- html_nodes(base_html, ".pt-md-0")
bed <- html_text(bed_html) %>%
gsub("\r\n", "", .) %>%
str_trim(side = c("both", "left", "right")) %>%
str_squish()
# class-1 beds
bed_class1 <- str_extract_all(bed, "[0-9]+ Bed Kosong Kelas I ") %>%
lapply(function(x) if(identical(x, character(0))) NA_character_ else x) %>%
lapply(FUN = function(t) as.numeric(gsub(" Bed Kosong Kelas I", "", x = t))) %>%
lapply(.,FUN = sum) %>%
unlist(., use.names = F)
# class-2 beds
bed_class2 <- str_extract_all(bed, "[0-9]+ Bed Kosong Kelas II ") %>%
lapply(function(x) if(identical(x, character(0))) NA_character_ else x) %>%
lapply(FUN = function(t) as.numeric(gsub(" Bed Kosong Kelas II", "", x = t))) %>%
lapply(.,FUN = sum) %>%
unlist(., use.names = F)
# class-3 beds
bed_class3 <- str_extract_all(bed, "[0-9]+ Bed Kosong Kelas III ") %>%
lapply(function(x) if(identical(x, character(0))) NA_character_ else x) %>%
lapply(FUN = function(t) as.numeric(gsub(" Bed Kosong Kelas III", "", x = t))) %>%
lapply(.,FUN = sum) %>%
unlist(., use.names = F)
# update time (taking the minimum times)
update_class1 <- str_extract_all(bed, "Kelas I Di Ruang [a-zA-Z\\& ]+ [0-9]+ (jam|menit)") %>%
lapply(function(x) if(identical(x, character(0))) NA_character_ else x) %>%
lapply(function(t) gsub("[a-zA-Z\\& ]+ diupdate", "", x=t)) %>%
map(1) %>%
unlist(., use.names = F) %>%
str_trim(side = c("both", "left", "right")) %>%
str_squish()
update_class2 <- str_extract_all(bed, "Kelas II Di Ruang [a-zA-Z\\& ]+ [0-9]+ (jam|menit)") %>%
lapply(function(x) if(identical(x, character(0))) NA_character_ else x) %>%
lapply(function(t) gsub("[a-zA-Z\\& ]+ diupdate", "", x=t))%>%
map(1) %>%
unlist(., use.names = F) %>%
str_trim(side = c("both", "left", "right")) %>%
str_squish()
update_class3 <- str_extract_all(bed, "Kelas III Di Ruang [a-zA-Z\\& ]+ [0-9]+ (jam|menit)") %>%
lapply(function(x) if(identical(x, character(0))) NA_character_ else x) %>%
lapply(function(t) gsub("[a-zA-Z\\& ]+ diupdate", "", x=t)) %>%
map(1) %>%
unlist(., use.names = F) %>%
str_trim(side = c("both", "left", "right")) %>%
str_squish()
# telephone number
tlp_html <- html_nodes(base_html, ".text-right span")
tlp <- html_text(tlp_html)
tlp <- tlp[-1]
# combining into df for COVID beds
half_list <- tibble(
hospital = list_hospital,
address = address,
bed_class1 = bed_class1,
last_update_class1 = update_class1,
bed_class2 = bed_class2,
last_update_class2 = update_class2,
bed_class3 = bed_class3,
last_update_class3 = update_class3,
tlp_number = tlp,
province = prov_code,
district = district_code,
scraped_at = Sys.time(),
bed_type = "Non COVID-19"
)
# get today's date
date <- Sys.Date() %>%
format("%m%d")
# saving the data
assign(paste0("noncovid_bed_data_", district_code, "_", date),
half_list)
}
# APPENDING THE NON-COVID BEDS DATA ----
dflist <- lapply(paste0("noncovid_bed_data_",district_codes,"_",date), get)
base_data <- rbindlist(dflist)
saveRDS(base_data, file=paste0(rout, "noncovid_bed_data_all", "_", date, ".rds"))
write.csv(base_data, paste0(csvout, "noncovid_bed_data_all", "_", date, ".csv"))
write_dta(base_data, paste0(dtaout, "noncovid_bed_data_all", "_", date, ".dta"))
# remove previous environment
rm(list=ls())
rm(list=ls())
# Loading the required library
library(tidyverse)
library(rvest)
library(janitor)
library(data.table)
library(epiDisplay)
library(haven)
library(fuzzyjoin)
# storing the working directories
wd_2012 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2012/"
wd_2013 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2013/"
wd_2014 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2014/"
wd_2015 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2015/"
wd_2016 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2016/"
wd_2017 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2017/"
wd_2018 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2018/"
wd_2019 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2019/"
wd_2020 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2020/"
wd_2021 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2021/"
script <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/script/"
code_data <- "C:/Users/Sean Hambali/Desktop/DATA/"
pop_data <- "C:/Users/Sean Hambali/Desktop/DATA/Population Data/"
# storing the province names
kodeprov <- read_dta(paste0(code_data, "kodeprov.dta"))
# storing the province population data
popdata <- read_dta(paste0(pop_data, "population_province_2020.dta"))
appended_2021 <- readRDS(paste0(wd_2021, "appended_2021.rds"))
# next, we want to generate province identifiers
appended_2021 <- appended_2021 %>%
mutate(
provinsi = str_to_title(kanwil),
provinsi = gsub("Kanwil", "", provinsi),
provinsi = gsub("Dki", "DKI", provinsi),
provinsi = gsub("D.i.", "DI", provinsi),
provinsi = gsub("\\s+", " ", provinsi)
)
# saving the province names from the appended data
provinsi_appended <- as_tibble(appended_2021$provinsi) %>%
unique()
names(provinsi_appended) <- c("provinsi")
# saving the province names from the kode provinsi data
provinsi_kode <- as_tibble(kodeprov$provinsi) %>%
unique()
names(provinsi_kode) <- c("nama_kodeprov")
# matching from appended to kodeprov data
provinsi_appended$nama_kodeprov <- ""
for (i in 1:dim(provinsi_appended)[1]) {
nama_kode <- agrep(provinsi_appended$provinsi[i], provinsi_kode$nama_kodeprov,
ignore.case = T, value = T,
max = list(sub = 0), useBytes = T)
nama_kode <- paste0(nama_kode, "")
provinsi_appended$nama_kodeprov[i] <- nama_kode
}
# completely merging the two files
appended_2021_joined <- merge(appended_2021, provinsi_appended, by.x =c("provinsi"), by.y = c("provinsi"), all = T)
appended_2021_joined <- merge(appended_2021_joined, kodeprov, by.x = c("nama_kodeprov"), by.y = c("provinsi"), all = T)
appended_2021_joined <- appended_2021_joined %>%
dplyr::select(-nama_kodeprov, -(kabupaten:id))
appended_2021_joined <- merge(appended_2021_joined, popdata, by.x = c("kode"), by.y = c("kode_prov"), all = T)
View(appended_2021_joined)
?merge
# completely merging the two files
appended_2021_joined <- merge(appended_2021, provinsi_appended, by.x =c("provinsi"), by.y = c("provinsi"), all = T)
appended_2021_joined <- merge(appended_2021_joined, kodeprov, by.x = c("nama_kodeprov"), by.y = c("provinsi"), all.x = T)
appended_2021_joined <- appended_2021_joined %>%
dplyr::select(-nama_kodeprov, -(kabupaten:id))
appended_2021_joined <- merge(appended_2021_joined, popdata, by.x = c("kode"), by.y = c("kode_prov"), all.x = T)
View(appended_2021_joined)
# saving the appended data
saveRDS(appended_2021_joined, paste0(wd_2021, "appended_2021.rds"))
rm(list=ls())
# Loading the required library
library(tidyverse)
library(rvest)
library(janitor)
library(data.table)
library(epiDisplay)
library(haven)
library(fuzzyjoin)
wd_2012 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2012/"
wd_2013 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2013/"
wd_2014 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2014/"
wd_2015 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2015/"
wd_2016 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2016/"
wd_2017 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2017/"
wd_2018 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2018/"
wd_2019 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2019/"
wd_2020 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2020/"
wd_2021 <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/2021/"
script <- "C:/Users/Sean Hambali/Documents/GitHub/prisondata_ID/script/"
code_data <- "C:/Users/Sean Hambali/Desktop/DATA/"
pop_data <- "C:/Users/Sean Hambali/Desktop/DATA/Population Data/"
library(tidyverse)
library(rvest)
library(janitor)
library(data.table)
library(epiDisplay)
library(haven)
library(fuzzyjoin)
# we first load the appended 2021 data
appended_2021 <- readRDS(paste0(wd_2021, "appended_2021.rds"))
head(appended_2021)
# we first load the appended 2021 data
appended_2021 <- as_tibble(readRDS(paste0(wd_2021, "appended_2021.rds")))
head(appended_2021)
?summarise
# we collapse the data at the daily province level
prov_level_2021 <- appended_2021 %>%
group_by(kode, provinsi, tanggal_sdp) %>%
summarise(jumlah_sdp = sum(sdp, na.rm = T),
jumlah_sms = sum(sms, na.rm = T),
pop = first(pop[!is.na(pop)])
)
View(prov_level_2021)
# we collapse the data at the daily province level
prov_level_2021 <- appended_2021 %>%
group_by(kode, provinsi, tanggal_sdp) %>%
summarise(jumlah_sdp = sum(sdp, na.rm = T),
jumlah_sms = sum(sms, na.rm = T),
pop = first(pop[!is.na(pop)])
) %>%
mutate(
sdp_per1000 = jumlah_sdp/ pop * 1000,
sms_per1000 = jumlah_sms / pop * 1000
)
View(prov_level_2021)
# which provinces have the highest incarceration rates?
prov_level_2021[tanggal_sdp == as.Date("16-08-2021", format = "%d-%m-%Y")] %>%
ggplot(mapping = aes(x = tanggal_sdp, y = sdp_per1000)) +
geom_bar()
# we collapse the data at the daily province level
prov_level_2021 <- appended_2021 %>%
group_by(kode, provinsi, tanggal_sdp) %>%
summarise(jumlah_sdp = sum(sdp, na.rm = T),
jumlah_sms = sum(sms, na.rm = T),
pop = first(pop[!is.na(pop)])
) %>%
mutate(
sdp_per1000 = jumlah_sdp/ pop * 1000,
sms_per1000 = jumlah_sms / pop * 1000
)
# which provinces have the highest incarceration rates?
prov_level_2021[tanggal_sdp == as.Date("16-08-2021", format = "%d-%m-%Y")] %>%
ggplot(mapping = aes(x = tanggal_sdp, y = sdp_per1000)) +
geom_bar()
# which provinces have the highest incarceration rates?
prov_level_2021[tanggal_sdp = as.Date("16-08-2021", format = "%d-%m-%Y")] %>%
ggplot(mapping = aes(x = tanggal_sdp, y = sdp_per1000)) +
geom_bar()
# which provinces have the highest incarceration rates?
prov_level_2021[prov_level_2021$tanggal_sdp == as.Date("16-08-2021", format = "%d-%m-%Y")] %>%
ggplot(mapping = aes(x = tanggal_sdp, y = sdp_per1000)) +
geom_bar()
# which provinces have the highest incarceration rates?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d")))
# which provinces have the highest incarceration rates?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d"))) %>%
ggplot(mapping = aes(x = tanggal_sdp, y = sdp_per1000)) +
geom_bar()
# which provinces have the highest incarceration rates?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d"))) %>%
ggplot(mapping = aes(x = province)) +
geom_bar()
# which provinces have the highest incarceration rates?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d"))) %>%
ggplot(mapping = aes(x = provinsi)) +
geom_bar()
# which provinces have the highest incarceration rates?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d"))) %>%
ggplot(mapping = aes(x = provinsi)) +
geom_bar(stat = "identity")
# which provinces have the highest incarceration rates?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d"))) %>%
ggplot(mapping = aes(x = provinsi, y = sdp_per1000)) +
geom_bar(stat = "identity")
# which provinces have the highest incarceration rates?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d"))) %>%
ggplot(mapping = aes(x = provinsi, y = sdp_per1000)) +
geom_bar(stat = "identity") +
coord_flip()
# which provinces have the highest incarceration rates?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d"))) %>%
ggplot(mapping = aes(x = reorder(provinsi, -sdp_per1000), y = sdp_per1000)) +
geom_bar(stat = "identity") +
coord_flip()
# which provinces have the highest incarceration rates?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d"))) %>%
ggplot(mapping = aes(x = reorder(provinsi, -sdp_per1000), y = sdp_per1000)) +
geom_bar(stat = "identity") +
coord_flip() +
theme_tufte()
library(ggthemes)
install.packages("ggthemes")
library(ggthemes)
# which provinces have the highest incarceration rates?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d"))) %>%
ggplot(mapping = aes(x = reorder(provinsi, -sdp_per1000), y = sdp_per1000)) +
geom_bar(stat = "identity") +
coord_flip() +
theme_tufte()
# which provinces have the highest incarceration rates?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d"))) %>%
ggplot(mapping = aes(x = reorder(provinsi, -sdp_per1000), y = sdp_per1000)) +
geom_bar(stat = "identity") +
coord_flip() +
theme_bw()
# which provinces have the highest incarceration rates?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d"))) %>%
ggplot(mapping = aes(x = reorder(provinsi, -sdp_per1000), y = sdp_per1000)) +
geom_bar(stat = "identity") +
labs(y = "Incarcerated per 1000 Population",
x = "Provinces",
title = "Incarceration Rates per 1000 Population, as of 16 August 2021")
# which provinces have the highest incarceration rates?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d"))) %>%
ggplot(mapping = aes(x = reorder(provinsi, -sdp_per1000), y = sdp_per1000)) +
geom_bar(stat = "identity") +
labs(y = "Incarcerated per 1000 Population",
x = "Provinces",
title = "Incarceration Rates per 1000 Population, as of 16 August 2021") +
coord_flip() +
theme_bw()
# what are the trend lines of incarceration rates across provinces in 2021?
prov_level_2021 %>%
ggplot(aes(x = tanggal_sdp, y = sdp_per1000, color = provinsi)) +
geom_line()
prov_level_2021$year <- format(prov_level_2021$tanggal_sdp, format = "%Y")
# what are the trend lines of incarceration rates across provinces in 2021?
prov_level_2021$year <- format(prov_level_2021$tanggal_sdp, format = "%Y")
prov_level_2021 %>%
filter(year == 2021) %>%
ggplot(aes(x = tanggal_sdp, y = sdp_per1000, color = provinsi)) +
geom_line()
susenas_2019 <- "C:/Users/Sean Hambali/Desktop/DATA/SUSENAS/2019"
# loading the exp cap data
expcap_2019 <- read_dta(paste0(susenas_2019, "expcap_prov_2019.dta"))
susenas_2019 <- "C:/Users/Sean Hambali/Desktop/DATA/SUSENAS/2019/"
# loading the exp cap data
expcap_2019 <- read_dta(paste0(susenas_2019, "expcap_prov_2019.dta"))
# merging the province level data with the expcap data
prov_level_2021 <- merge(prov_level_2021, expcap_2019, by.x = c("kode"), by.y = c("kode_prov"), all.x = T)
View(prov_level_2021)
# are these rates showing relationships with median expenditure per capita?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d"))) %>%
mutate(
lexp_cap = log(exp_cap)
) %>%
ggplot(aes(lexp_cap, sdp_per1000)) +
geom_point() + geom_smooth()
# are these rates showing relationships with median expenditure per capita?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d"))) %>%
mutate(
lexp_cap = log(exp_cap)
) %>%
ggplot(aes(lexp_cap, sdp_per1000)) +
geom_point() + geom_smooth() +
labs(y = "Incarcerated per 1000 Population",
x = "Log Expenditure per Capita in 2019",
title = "Incarceration Rates and Expenditure per Capita Levels")
# are these rates showing relationships with median expenditure per capita?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d"))) %>%
mutate(
lexp_cap = log(exp_cap)
) %>%
ggplot(aes(lexp_cap, sdp_per1000)) +
geom_point() + geom_smooth() +
labs(y = "Incarcerated per 1000 Population",
x = "Log Expenditure per Capita in 2019",
title = "Incarceration Rates and Expenditure per Capita Levels") +
theme_bw()
# are these rates showing relationships with median expenditure per capita?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d"))) %>%
mutate(
lexp_cap = log(exp_cap)
) %>%
ggplot(aes(lexp_cap, sdp_per1000)) +
geom_point() + geom_smooth() +
labs(y = "Incarcerated per 1000 Population",
x = "Log Median Expenditure per Capita in 2019",
title = "Incarceration Rates and Expenditure per Capita Levels") +
theme_bw()
# are these rates showing relationships with median expenditure per capita?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d"))) %>%
mutate(
lexp_cap = log(exp_cap)
) %>%
ggplot(aes(lexp_cap, sdp_per1000)) +
geom_point() + geom_smooth() +
labs(y = "Incarcerated per 1000 Population",
x = "Log Median Expenditure per Capita in 2019",
title = "Incarceration Rates and Expenditure per Capita Levels") +
theme_bw() +
theme(plot.title = element_text(hjust = .5))
# are these rates showing relationships with median expenditure per capita?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d"))) %>%
mutate(
lexp_cap = log(exp_cap)
) %>%
ggplot(aes(lexp_cap, sdp_per1000)) +
geom_point() + geom_abline() +
labs(y = "Incarcerated per 1000 Population",
x = "Log Median Expenditure per Capita in 2019",
title = "Incarceration Rates and Expenditure per Capita Levels") +
theme_bw() +
theme(plot.title = element_text(hjust = .5))
# are these rates showing relationships with median expenditure per capita?
prov_level_2021 %>%
filter(tanggal_sdp == as.Date("2021-08-16", format("%Y-%m-%d"))) %>%
mutate(
lexp_cap = log(exp_cap)
) %>%
ggplot(aes(lexp_cap, sdp_per1000)) +
geom_point() + geom_smooth(method = lm) +
labs(y = "Incarcerated per 1000 Population",
x = "Log Median Expenditure per Capita in 2019",
title = "Incarceration Rates and Expenditure per Capita Levels") +
theme_bw() +
theme(plot.title = element_text(hjust = .5))
